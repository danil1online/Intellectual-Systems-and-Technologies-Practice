# –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ9 –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ. Density-Based Clustering

---

## üéØ –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã.

–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–Ω–∏—è –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–æ–º Density-Based Clustering

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ –∏–¥–µ–∏ –∏ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã.

–ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫–∏—Ö –∫–∞–∫ –º–µ—Ç–æ–¥ k-—Å—Ä–µ–¥–Ω–∏—Ö, –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –∏ –Ω–µ—á–µ—Ç–∫–∞—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è, –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –∫ –∑–∞–¥–∞—á–∞–º —Å –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏ —Å–ª–æ–∂–Ω–æ–π —Ñ–æ—Ä–º—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞, —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –º–æ–≥—É—Ç –Ω–µ –¥–∞—Ç—å —Ö–æ—Ä–æ—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
—ç–ª–µ–º–µ–Ω—Ç—ã –≤ –æ–¥–Ω–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ –∏–ª–∏ —Ç–æ—á–Ω–æ—Å—Ç—å / —Å–∫–æ—Ä–æ—Å—Ç—å –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∏–∑–∫–∏–º–∏.

üìö –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è Density-Based Clustering –Ω–∞—Ö–æ–¥–∏—Ç –æ–±–ª–∞—Å—Ç–∏ —Å –≤—ã—Å–æ–∫–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–¥–µ–ª–µ–Ω—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ –æ–±–ª–∞—Å—Ç—è–º–∏ —Å –Ω–∏–∑–∫–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é. 
–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –≤ –¥–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ä–∞–¥–∏—É—Å–∞.

üìö –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ –∞–ª–≥–æ—Ä–∏—Ç–º DBSCAN —è–≤–ª—è–µ—Ç—Å—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –±–∞–∑–æ–≤–æ–≥–æ –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ Density-Based Spatial Clustering of Applications with Noise (–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å —É—á–µ—Ç–æ–º –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏). 
–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ ‚Äî –æ–¥–∏–Ω –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–æ–≤. 

üìö –ò–¥–µ—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∫–ª–∞—Å—Ç–µ—Ä—É, –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Ä—è–¥–æ–º —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥—Ä—É–≥–∏—Ö —Ç–æ—á–µ–∫ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞.
–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–≤—É—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: Epsilon –∏ Minimum Points
Epsilon –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–¥–∞–Ω–Ω—ã–π —Ä–∞–¥–∏—É—Å, –∫–æ—Ç–æ—Ä—ã–π, –µ—Å–ª–∏ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫, –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è _–ø–ª–æ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç—å—é_.
Minimum Points –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–µ –º—ã —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å –≤ –æ–∫—Ä–µ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∞–∫–æ–π —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ —Ç–æ—á–µ–∫, –∫–∞–∫ _–∫–ª–∞—Å—Ç–µ—Ä–∞_.

---

## üìÅ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –º–µ—Ç–æ–¥—ã

- –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ - [Ubuntu 22.04](https://help.ubuntu.ru/wiki/–∫–æ–º–∞–Ω–¥–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞)
- –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äì [python](https://www.python.org/).
- –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
  -  [jupyter Notebook](https://jupyter.org/).
- –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
  - [matplotlib](https://matplotlib.org/)
  - [numpy](https://numpy.org/)
  - [scikit-learn](https://scikit-learn.org/)
  - [pandas](https://pandas.pydata.org/)
- –î–∞—Ç–∞—Å–µ—Ç:
  - –Ω–∞–±–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç ["Weather Station"](https://www.kaggle.com/code/lykin22/weather-station-clustering-using-dbscan/output)

 
---

## üß™ –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç—ã 

---

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã  

**–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ [Jupyter-Hub](https://jupyter.org/hub) –ø–æ –∞–¥—Ä–µ—Å—É [Jupyter-Hub-–ò–ò–°–¢-–ù–ü–ò](http://195.133.13.56:8000/)**

![–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è](https://github.com/danil1online/intelligent_information_and_measurement_systems/blob/main/images/autorization.png)

**–° –ø–æ–º–æ—â—å—é —Ñ–∞–π–ª–æ–≤–æ–≥–æ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–ª–µ–≤–∞ –ø–µ—Ä–µ–π—Ç–∏ –≤ —Å–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ (–§–ò–û –∏ –≥–æ–¥), —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–∞–Ω–µ–µ (–¥–≤–æ–π–Ω—ã–º –Ω–∞–∂–∞—Ç–∏–µ–º –º—ã—à–∏)**

![–ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥](../images/work_dir.png)

**–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Å–∏–º–≤–æ–ª–æ–º +**

![–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–∏](https://github.com/danil1online/intelligent_information_and_measurement_systems/blob/main/images/new_window_create.png)

**–í—ã–±—Ä–∞—Ç—å —Ç–∏–ø –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–∏ -- Notebook**

![–°–æ–∑–¥–∞–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ Notebook](../images/notebook.png)

**–°–æ—Ö—Ä–∞–Ω–∏—Ç—å / –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª**

![–°–æ–∑–¥–∞–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ Notebook](../images/save_new_file.png)

**–†–∞–±–æ—Ç–∞—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –≤–∏–¥–∞**

![–í–ª–∞–¥–∫–∞ Notebook](../images/notebook_clear_window.png)

**–ò–º–ø–æ—Ä—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫**

```python
import numpy as np 
from sklearn.cluster import DBSCAN 
# https://stackoverflow.com/questions/65898399/no-module-named-sklearn-datasets-samples-generator
from sklearn.datasets import make_blobs 
from sklearn.preprocessing import StandardScaler 
import matplotlib.pyplot as plt 
%matplotlib inline
import warnings
warnings.filterwarnings('ignore')
import pandas as pd
```

---

### üß™ Density-Based Clustering –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –Ω–∞–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö

1. üß™ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–±–æ—Ä–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
  - –§—É–Ω–∫—Ü–∏—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –Ω–∏–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –µ–π –∑–∞–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    - ```centroidLocation``` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–æ–≤, –≤–æ–∫—Ä—É–≥ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    - ```numSamples``` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–æ–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–µ–Ω—Ç—Ä–æ–≤ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–µ–Ω—Ç—Ä–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ centroidLocation)
    - ```clusterDeviation``` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏; —á–µ–º –±–æ–ª—å—à–µ —á–∏—Å–ª–æ, —Ç–µ–º –±–æ–ª—å—à–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –Ω–∏–º–∏
    ```python
    def createDataPoints(centroidLocation, numSamples, clusterDeviation):
      X, y = make_blobs(n_samples=numSamples, centers=centroidLocation, 
                                  cluster_std=clusterDeviation)
      
      X = StandardScaler().fit_transform(X)
      return X, y
    
    X, y = createDataPoints([[4,3], [2,-1], [-1,4]] , 1500, 0.5)
    ```

2. üß™ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–±—É—á–µ–Ω–∏–µ) –º–æ–¥–µ–ª–∏ K-Means**

```python
epsilon = 0.3
minimumSamples = 7
db = DBSCAN(eps=epsilon, min_samples=minimumSamples).fit(X)
labels = db.labels_
labels
```

3. üß™ **–í—ã–±—Ä–æ—Å—ã**

–í—ã–±—Ä–æ—Å—ã - —ç—Ç–æ —Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–Ω–æ –æ—à–∏–±–æ—á–Ω–æ –±—ã–ª–∏ –æ—Ç–Ω–µ—Å–µ–Ω—ã –∫ —Ç–æ–º—É –∏–ª–∏ –∏–Ω–æ–º—É –∫–ª–∞—Å—Å—É. 
–ó–∞–º–µ–Ω–∏–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ core_samples_mask, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, –Ω–∞ ¬´True¬ª, –∞ –µ—Å–ª–∏ —Ç–æ—á–∫–∏ —è–≤–ª—è—é—Ç—Å—è –≤—ã–±—Ä–æ—Å–∞–º–∏ - –Ω–∞ ¬´False¬ª.

```python
core_samples_mask = np.zeros_like(db.labels_, dtype=bool)
core_samples_mask[db.core_sample_indices_] = True
core_samples_mask
```

```python
n_clusters_ = len(set(labels)) - (1 if -1 in labels else 0)
n_clusters_
```

```python
unique_labels = set(labels)
unique_labels
```

4. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**

```python
colors = plt.cm.Spectral(np.linspace(0, 1, len(unique_labels)))
colors
```

```python
for k, col in zip(unique_labels, colors):
    if k == -1:
        # Black used for noise.
        col = 'k'

    class_member_mask = (labels == k)

    # Plot the datapoints that are clustered
    xy = X[class_member_mask & core_samples_mask]
    plt.scatter(xy[:, 0], xy[:, 1],s=50, c=col, marker=u'o', alpha=0.5)

    # Plot the outliers
    xy = X[class_member_mask & ~core_samples_mask]
    plt.scatter(xy[:, 0], xy[:, 1],s=50, c=col, marker=u'o', alpha=0.5)
```

 

--- 

### üìå –ó–∞–¥–∞–Ω–∏–µ ‚Ññ1

- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞—Ç—å —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤—ã—à–µ –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–º [k-—Å—Ä–µ–¥–Ω–∏—Ö](Pr_7.md), –Ω–µ —Å–æ–∑–¥–∞–≤–∞—è –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–æ–≤–æ

---

### üß™ –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π

DBSCAN –æ—Å–æ–±–µ–Ω–Ω–æ —Ö–æ—Ä–æ—à –¥–ª—è —Ç–∞–∫–∏—Ö –∑–∞–¥–∞—á, –≥–¥–µ –≤–∞–∂–µ–Ω –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç. 
–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ DBSCAN –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä—ã –ª—é–±–æ–π –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã, –Ω–µ –ø–æ–¥–≤–µ—Ä–≥–∞—è—Å—å –≤–ª–∏—è–Ω–∏—é —à—É–º–∞. 
–ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π –≤ –ö–∞–Ω–∞–¥–µ.
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ—à–µ–Ω–∏—è —Ç–∞–∫–æ–π –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–∏—Å–∫–∞ –≥—Ä—É–ø–ø—ã —Å—Ç–∞–Ω—Ü–∏–π —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –ø–æ–≥–æ–¥–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏. 
–ê–ª–≥–æ—Ä–∏—Ç–º –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã, –Ω–æ –∏ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –±–æ–ª–µ–µ –ø–ª–æ—Ç–Ω—ã–µ —á–∞—Å—Ç–∏ –≤—ã–±–æ—Ä–æ–∫ —Å —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –º–µ–Ω–µ–µ –ø–ª–æ—Ç–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –∏–ª–∏ —à—É–º—ã.

–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω—ë–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏. –ú—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ö–µ–º–µ:

1. üß™ **–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ CSV-—Ñ–∞–π–ª–∞**

```python
filename='/home/jupyter/work/data/weather-stations20140101-20141231.csv'
pdf = pd.read_csv(filename)
pdf.head(5)
```

2. üß™ **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**

–£–¥–∞–ª–∏–º —Å—Ç—Ä–æ–∫–∏, –≤ –ø–æ–ª–µ Tm –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–π

```python
pdf = pdf[pd.notnull(pdf["Tm"])]
pdf = pdf.reset_index(drop=True)
pdf.head(5)
```

3. üß™ **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**

–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é —Å—Ç–∞–Ω—Ü–∏–π –Ω–∞ –∫–∞—Ä—Ç–µ –≤—ã–ø–æ–ª–Ω–∏–º —Å –ø–æ–º–æ—â—å—é –ø–∞–∫–µ—Ç–∞ basemap. 
–ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ [matplotlib basemap](https://matplotlib.org/basemap/stable/) ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–≤—É–º–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–∞—Ä—Ç–∞—Ö –≤ Python. 
Basemap —Å–∞–º –ø–æ —Å–µ–±–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ, –Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ü–∏–∏.
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ä–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç–∞–Ω—Ü–∏–∏ –∑–∞ –≥–æ–¥.
```python
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
from pylab import rcParams

rcParams['figure.figsize'] = (14,10)

llon=-140
ulon=-50
llat=40
ulat=65

pdf=pdf[(pdf['Long']>llon)&(pdf['Long']<ulon)&(pdf['Lat']>llat)&(pdf['Lat'] < ulat)]

my_map = Basemap(projection='merc',
            resolution = 'l', area_thresh = 1000.0,
            llcrnrlon=llon, llcrnrlat=llat,
            urcrnrlon=ulon, urcrnrlat=ulat) 

my_map.drawcoastlines()
my_map.drawcountries()
my_map.fillcontinents(color = 'white', alpha = 0.3)
my_map.shadedrelief()       

xs,ys = my_map(np.asarray(pdf.Long), np.asarray(pdf.Lat))
pdf['xm']= xs.tolist()
pdf['ym'] =ys.tolist()

for index,row in pdf.iterrows():
   my_map.plot(row.xm, row.ym,markerfacecolor =([1,0,0]),  
               marker='o', markersize= 5, alpha = 0.75)
plt.show()
```

4. üß™ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å—Ç–∞–Ω—Ü–∏–π –ø–æ –∏—Ö –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é, —Ç. –µ. —à–∏—Ä–æ—Ç–µ –∏ –¥–æ–ª–≥–æ—Ç–µ**

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ DBSCAN –∏–∑ sklearn –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é DBSCAN –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ –∏–ª–∏ –º–∞—Ç—Ä–∏—Ü—ã —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π.
–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –º—ã –ø–µ—Ä–µ–¥–∞–µ–º –µ–π –º–∞—Å—Å–∏–≤ Numpy Clus_dataSet –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–µ—Ä–Ω–æ–≤—ã—Ö –æ–±—Ä–∞–∑—Ü–æ–≤ –≤—ã—Å–æ–∫–æ–π –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º –∫–ª–∞—Å—Ç–µ—Ä—ã –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ.

```python
from sklearn.cluster import DBSCAN
import sklearn.utils
from sklearn.preprocessing import StandardScaler
sklearn.utils.check_random_state(1000)
Clus_dataSet = pdf[['xm','ym']]
Clus_dataSet = np.nan_to_num(Clus_dataSet)
Clus_dataSet = StandardScaler().fit_transform(Clus_dataSet)

db = DBSCAN(eps=0.15, min_samples=10).fit(Clus_dataSet)
core_samples_mask = np.zeros_like(db.labels_, dtype=bool)
core_samples_mask[db.core_sample_indices_] = True
labels = db.labels_
pdf["Clus_Db"]=labels

realClusterNum=len(set(labels)) - (1 if -1 in labels else 0)
clusterNum = len(set(labels)) 

pdf[["Stn_Name","Tx","Tm","Clus_Db"]].head(5)
```

–° –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã ```set(labels)``` –º–æ–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–ª—è –≤—ã–±—Ä–æ—Å–æ–≤ –º–µ—Ç–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ —Ä–∞–≤–Ω–∞ -1.
    
5. üß™ **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è**
```python
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
from pylab import rcParams
%matplotlib inline
rcParams['figure.figsize'] = (14,10)

my_map = Basemap(projection='merc',
            resolution = 'l', area_thresh = 1000.0,
            #min longitude (llcrnrlon) and latitude (llcrnrlat)
            llcrnrlon=llon, llcrnrlat=llat, 
            #max longitude (urcrnrlon) and latitude (urcrnrlat)
            urcrnrlon=ulon, urcrnrlat=ulat) 

my_map.drawcoastlines()
my_map.drawcountries()
#my_map.drawmapboundary()
my_map.fillcontinents(color = 'white', alpha = 0.3)
my_map.shadedrelief()

colors = plt.get_cmap('jet')(np.linspace(0.0, 1.0, clusterNum))

for clust_number in set(labels):
    c=(([0.4,0.4,0.4]) if clust_number == -1 else colors[np.int64(clust_number)])
    clust_set = pdf[pdf.Clus_Db == clust_number]                    
    my_map.scatter(clust_set.xm, clust_set.ym, color =c,  
                   marker='o', s= 20, alpha = 0.85)
    if clust_number != -1:
        cenx=np.mean(clust_set.xm) 
        ceny=np.mean(clust_set.ym) 
        plt.text(cenx,ceny,str(clust_number), fontsize=25, color='red',)
        print ("Cluster "+str(clust_number)+', Avg Temp: '+ str(np.mean(clust_set.Tm)))
```

6. üß™ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å—Ç–∞–Ω—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Ö –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è, —Å—Ä–µ–¥–Ω–µ–π, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã**
```python
from sklearn.cluster import DBSCAN
import sklearn.utils
from sklearn.preprocessing import StandardScaler
sklearn.utils.check_random_state(1000)
Clus_dataSet = pdf[['xm','ym','Tx','Tm','Tn']]
Clus_dataSet = np.nan_to_num(Clus_dataSet)
Clus_dataSet = StandardScaler().fit_transform(Clus_dataSet)

db = DBSCAN(eps=0.3, min_samples=10).fit(Clus_dataSet)
core_samples_mask = np.zeros_like(db.labels_, dtype=bool)
core_samples_mask[db.core_sample_indices_] = True
labels = db.labels_
pdf["Clus_Db"]=labels

realClusterNum=len(set(labels)) - (1 if -1 in labels else 0)
clusterNum = len(set(labels)) 

pdf[["Stn_Name","Tx","Tm","Clus_Db"]].head(5)
```

7. üß™ **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã**
```python
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
from pylab import rcParams
%matplotlib inline
rcParams['figure.figsize'] = (14,10)

my_map = Basemap(projection='merc',
            resolution = 'l', area_thresh = 1000.0,
            #min longitude (llcrnrlon) and latitude (llcrnrlat)
            llcrnrlon=llon, llcrnrlat=llat, 
            #max longitude (urcrnrlon) and latitude (urcrnrlat)
            urcrnrlon=ulon, urcrnrlat=ulat) 

my_map.drawcoastlines()
my_map.drawcountries()
#my_map.drawmapboundary()
my_map.fillcontinents(color = 'white', alpha = 0.3)
my_map.shadedrelief()

colors = plt.get_cmap('jet')(np.linspace(0.0, 1.0, clusterNum))

for clust_number in set(labels):
    c=(([0.4,0.4,0.4]) if clust_number == -1 else colors[np.int64(clust_number)])
    clust_set = pdf[pdf.Clus_Db == clust_number]                    
    my_map.scatter(clust_set.xm, clust_set.ym, color =c,  
                   marker='o', s= 20, alpha = 0.85)
    if clust_number != -1:
        cenx=np.mean(clust_set.xm) 
        ceny=np.mean(clust_set.ym) 
        plt.text(cenx,ceny,str(clust_number), fontsize=25, color='red',)
        print ("Cluster "+str(clust_number)+', Avg Temp: '+ str(np.mean(clust_set.Tm)))
```

--- 

### üìå –ó–∞–¥–∞–Ω–∏–µ ‚Ññ2

–ü—Ä–æ–≤–µ–¥–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π, —Å–¥–µ–ª–∞–π—Ç–µ –≤—ã–≤–æ–¥—ã –æ–± –∏—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏, —Å—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–º–Ω–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö) 

### üìå –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ó–∞–¥–∞–Ω–∏—è—Ö
